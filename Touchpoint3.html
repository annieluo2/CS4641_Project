<!DOCTYPE html>
<html>
  <head>
    <title>homedemic</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        .dropbtn {
          background-color: #b0e0e6;
          color: white;
          padding: 16px;
          font-size: 16px;
          border: none;
        }

        .dropdown {
          position: relative;
          display: inline-block;
        }

        .dropdown-content {
          display: none;
          position: absolute;
          background-color: #f1f1f1;
          min-width: 160px;
          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
          z-index: 1;
        }

        .dropdown-content a {
          color: black;
          padding: 12px 16px;
          text-decoration: none;
          display: block;
        }

        .dropdown-content a:hover {background-color: #c9eaee;}

        .dropdown:hover .dropdown-content {display: block;}

        .dropdown:hover .dropbtn {background-color: #b0e0e6;}
      
        .nav-item {
            padding-right: 10px
        }
         * {
            font-family: 'Cabin', sans-serif;
         }
    </style>
    <!-- Bootstrap CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Cabin&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  </head>
  <body>
    <nav class="navbar fixed-top navbar-expand-sm navbar-light" style="background-color: #b0e0e6">
        <div class="dropdown">
          <button class="dropbtn"><b>homedemic &darr;</b>
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-content">
            <a href="index.html">Home</a>
            <a href="Touchpoint1.html">Proposal</a>
            <a href="Touchpoint2.html">Midterm</a>
            <a href="Touchpoint3.html">Final</a>
          </div>
        </div> 
        <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <!-- 
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home<span class="sr-only">(current)</span></a>
                </li>
                <a href="#Lorem_Ipsum">top</a>
                -->
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section0">Cross-Validation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section1">KNN Regression</a>
                </li>
                <br>
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section2">KNN Results Visualizer</a>
                </li>
                <br>
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section3">Polynomial Regression</a>
                </li>
                <br>  
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section4">Linear Regression</a>
                </li>
                <br>
                <li class="nav-item">
                    <a class="nav-link" style="color: black;" href="#section5">Conclusion</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="jumbotron-fluid" style="background-color: black; padding-top: 90px; padding-bottom: 50px;"> 
        <div class="row">
            <div class="col-sm-6" style="border-right: 1px dashed white; text-align: right; color: white;">
                <h1>Touchpoint 3</h1>
              </div>
              <div class="col-sm-6" style="text-align: left; color: #B0E0E6">
                  <h4> Supervised Learning </h4>
              </div>
          </div>
      </div>  
      <div class="jumbotron-fluid" id="section0" style="padding-top: 50px; padding-bottom: 50px; background-color: #B0E0E6; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-8" style="text-align: right;">
                <p>
                    We were hoping to see a difference in a higher mean and a lower standard deviation on our dataset with COVID compared to the one without. The results for the analysis with the COVID data were better for almost all of the cities, but only barely. We determined that the analysis showed that the COVID dataset had a slight effect on the housing market, but the results were too similar to make a definitive statement that COVID specifically was the root cause rather than a fluctuating economy a pandemic.
                </p>
                <img src="loocv.JPG" width="90%" />
                </div>
                <div class="col-sm-4" style="border-left: 1px dashed black;">
                    <h1>Cross-Validation</h1>
                </div>
            </div>
        </div>
    </div>
    <div class="jumbotron-fluid" id="section1" style="padding-top: 50px; padding-bottom: 50px; color: #B0E0E6; background-color: white; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-4" style="border-right: 1px dashed powderblue; text-align: right;">
                    <h1>K-Nearest Neighbors (KNN) Regression</h1>
                </div>
                <div class="col-sm-8" style="text-align: left;">
                 Our use of K-Nearest Neighbors, or KNN, regression served two purposes.
                  <h4> Part 1: Missing Data Imputation </h4>
                  <p> The first was to impute missing values in our combined housing-COVID feature datasets. While this task could not be validated with a ground-truth, it allowed for complete datasets that could then be used with other Supervised Learning algorithms. The two major variables imputed were median days to pending sale (which was originally missing for the New York MSA for parts of June-July 2020) and For Sale Inventory (which had missing points in Riverside, CA, and Tampa, FL).</p>
                  <h4> Part 2: Prediction of Trends </h4>
                  <p>The second purpose of K-Nearest Neighbors was to predict the median days to pending sale of time points after October 3, 2020, the cutoff of our training set. We used a test set between October 3 and October 31, 2020, and attempted to predict the median days to pending sale for the testing weeks. The elbow method was used in each city to tune the hyperparameter of number of neighbors. In New York and Los Angeles, our predictions returned equivalent predictions and low (less than or equal to 1) RMSE values for both datasets, which can be attributed to low impact of COVID on the high-demand and high-price housing markets in both cities. However, in Chicago, a city with relatively cheaper list prices and lower inventory (indicating lower supply and demand), the pandemic had a larger impact on the housing market, with prices being higher and available inventory being lower during the pandemic. Therefore, Chicago’s KNN regressions yielded different results when COVID was accepted and ignored, but both RMSE values remained below 1. This indicates that, for our small testing dataset, KNN regression was very effective in predicting future housing demand based on both existing housing factors as well as COVID cases in an area. However, one potential drawback of the approach taken would be that the training-testing split was very skewed in the non-COVID dataset. While the COVID dataset had a 90-10 split of relevant data (those with actual COVID cases), the non-COVID dataset’s split was 36:1 in favor of training data, which means that for non-COVID prediction, the predictions could be swayed by the high amounts of training data. Nevertheless, the prediction of median days to pending sale using KNN regression was an overall success and gave us useful insights. 
                </p>
                </div>
            </div>
        </div>
    </div>   
    <div class="jumbotron-fluid" id="section2" style="padding-top: 50px; padding-bottom: 50px; background-color: #B0E0E6; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-8" style="text-align: right;">
                    <div class="row">
                        <a id="la" class="btn btn-primary btn-lg bg-button" style="border-color: #bee5eb; background-color: #62bc86; color:white; cursor: pointer;" onclick="la()"
                        role="button">Los Angeles</a>
                        <a id="nyc" class="btn btn-primary btn-lg bg-button" style="border-color: #bee5eb; background-color: #62bc86; color:white; cursor: pointer;" onclick="nyc()"
                        role="button">New York</a>
                        <a id="chi" class="btn btn-primary btn-lg bg-button" style="border-color: #bee5eb; background-color: #62bc86; color:white; cursor: pointer;" onclick="chi()"
                        role="button">Chicago</a>
                    </div>
                      <div>
                        <div id="nyc-res" style="display: none">
                            <h2>New York, NY</h2>
                            <h3>Optimal Neighbors: <b>11</b></h3>
                            <h3>Median Days to Pending Sale</h3>
                            <h4>Week of October 10: <b>29</b></h4>
                            <h4>Week of October 17: 29 (actual 28)</h4>
                            <h4>Week of October 24: 29 (actual 28)</h4>
                            <h4>Week of October 31: <b>29</b></h4>
                            <h5>RMSE: <b>0.5</b></h5>
                            <img src="nyc-results.png" height="400" width="80%" />
                        </div>
                        <div id="la-res" style="display: none">
                            <h2>Los Angeles, CA</h2>
                            <h3>Optimal Neighbors: <b>1</b></h3>
                            <h3>Median Days to Pending Sale</h3>
                            <h4>Week of October 10: 13 (actual 12)</h4>
                            <h4>Week of October 17: 13 (actual 12)</h4>
                            <h4>Week of October 24: 13 (actual 12)</h4>
                            <h4>Week of October 31: 13 (actual 12)</h4>
                            <h5>RMSE: <b>1.0</b></h5>
                            <img src="la-results.png" height="400" width="80%" />
                        </div>
                        <div id="chi-res" style="display: none">
                            <h2>Chicago, IL</h2>
                            <div class="row">
                                <div class="col-sm-6">
                                    <h2>Without COVID</h2>
                                    <br>
                                    <h3>Optimal Neighbors: <b>5</b></h3>
                                    <h3>Median Days to Pending Sale</h3>
                                    <h4>Week of October 10: <b>12</b></h4>
                                    <h4>Week of October 17: 13 (actual 12)</h4>
                                    <h4>Week of October 24: 14 (actual 13)</h4>
                                    <h4>Week of October 31: 14 (actual 13)</h4>
                                    <h5>RMSE: <b>0.75</b></h5>
                                </div>
                                <div class="col-sm-6">
                                    <h2>With COVID</h2>
                                    <br>
                                    <h3>Optimal Neighbors: <b>1</b></h3>
                                    <h3>Median Days to Pending Sale</h3>
                                    <h4>Week of October 10: <b>12</b></h4>
                                    <h4>Week of October 17: <b>12</b></h4>
                                    <h4>Week of October 24: 12 (actual 13)</h4>
                                    <h4>Week of October 31: 12 (actual 13)</h4>
                                    <h5>RMSE: <b>0.5</b></h5>
                                </div>
                            </div>
                            <img src="chi-results.png" height="400" width="80%" />
                        </div>
                    </div>
                </div>
                <div class="col-sm-4" style="border-left: 1px dashed black;">
                    <h1>KNN Results</h1>
                    <p>Explanation of visuals: In the RMSE graph, red factors in COVID while green doesn't. In the 2D and 3D graphs, red dots are training weeks, and green are our testing weeks.</p>
                    <p>In the RMSE graph, where there is only one point for a given number of neighbors, this means that COVID data played no difference in RMSE.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="jumbotron-fluid" id="section3" style="padding-top: 50px; padding-bottom: 50px; color: #B0E0E6; background-color: white; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-4" style="border-right: 1px dashed powderblue; text-align: right;">
                    <h1>Polynomial Regression</h1>
                </div>
                <div class="col-sm-8" style="text-align: left;">
                  <p> Our goal while doing polynomial regression was to find the model which leads to the lowest errors. We did this by doing polynomial regression on degrees 1-25 using our features For- Sale Inventory and Median-List Price to predict the median days to sale. </p>
                  <img src="poly1.png" />
                  <p> The RMSE plot is shown above and polynomial degree 1 has the lowest RMSE value. </p>
                  <img src="poly2.png" />
                  <p>
                      Here is our RMSE plot with covid and the polynomial degree one has the lowest RMSE but the difference between the RMSE values of the regression with and without covid features are negligible which tells us that the number of Covid cases is not the best deciding feature to predict median days to sale.
                  </p>
                </div>
            </div>
        </div>
    </div>
    <div class="jumbotron-fluid" id="section4" style="padding-top: 50px; padding-bottom: 50px; background-color: #B0E0E6; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-8" style="text-align: right;">
                    <p>
                        We began with simple linear regression by multiplying the two housing data features (median list price and for-sale inventory) together into one independent variable and using median days pending to sale as the dependent variable. We found that using a train-test split of 90-10 produced the best results for the New York city dataset. The RMSE value was about 19.4699 which normalizes to about 36.74% of the range which signifies that the model is not very strong with making predictions.
                    </p>
                    <img src="lin0.JPG" width="50%" />
                    <p>
                        We realized that we could not combine COVID case data to the two housing features in a logical way for one independent variable, so we shifted to multiple linear regression.
                    </p>
                    <img src="lin2.png" width="80%" />
                    <p>
                        Including COVID data had a lower normalized RMSE value by .0509%, but the decrease in RMSE is so small that including the COVID case data does not seem to make a difference in the model's performance. Additionally, the RMSE values were still about the same compared to the simple linear regression model.
                    </p>
                    <img src="lin1.JPG" width="60%" />
                    <p>
                        Next, we tried standardizing our dataset to help lower our RMSE values. Standardization seemed to help reduce RMSE values by almost 9%. Differences between the two models' RMSE values were still pretty negligible though. These models are slightly better predictors compared to before, but they are still not that good. After further analysis, we determined that data could use KNN imputation for missing data points and improving our RMSE values.
                    </p>
                    <img src="lin4.JPG" width="60%" />
                    <p>
                        The model seems to predict very poorly for the major cities other than New York, but the RMSE values are consistently slightly lower when COVID data is included as a feature. This could mean that COVID has a very very slight effect on the median days pending to sale feature, but the effect is nearly negligible.
                    </p>
                    <img src="lin3.JPG" width="80%" />
                </div>
                <div class="col-sm-4" style="border-left: 1px dashed black;">
                    <h1>Linear Regression</h1>
                </div>
            </div>
        </div>
    </div>
    <div class="jumbotron-fluid" id="section5" style="padding-top: 50px; padding-bottom: 50px; background-color: white; color: black;">
        <div class="container">
            <div class="row">
                <div class="col-sm-4" style="border-right: 1px dashed powderblue; text-align: right;">
                    <h1>Conclusion</h1>
                </div>
                <div class="col-sm-8" style="text-align: left;">
                    From the unsupervised learning that we did, the correlation matrix helped us decide the features we would use for our regression model. It showed us that median list price and median sale price essentially told us the same thing (correlation value of 0.98), so we only needed to use one of them. Upon starting the supervised learning portion, we decided to go with median list price because we noticed that the median sale price data was not as up-to-date.
                    <br>
                    Going into the supervised learning portion of our project, we made some changes to our datasets. We decided to create datasets that combined pre-COVID and COVID dates for each MSA. For each algorithm, we would create two models: one with COVID case data as a feature and one without. Overall, we had some interesting results across the various supervised algorithms that we used.
                    <br>
                    For the leave out one cross validation, we wanted to see the mean and standard deviation of the dataset be larger with the COVID case data than the values without. This would tell us that the COVID cases improved the accuracy of the median days pending a sale than the dataset without this information. Out of the 15 cities that we ran analysis on, a majority of them demonstrated a slightly higher mean than how they performed without case counts. However, since a portion of the cities performed better without the case counts, we cannot definitively say that COVID had an effect on the housing market. From this we concluded that COVID could have a slight effect, but it could also be from a fluctuating pandemic economy or natural market shifts. 
                    <br>
                    For KNN prediction, we attempted to predict trends in median days to pending sale for New York, Los Angeles, and Chicago. We used hyperparameter tuning for the number of neighbors to determine the ideal predictions for each city based on both COVID and COVID-blind data. For each of these cities, we got RMSE (root-mean-square-error) values of less than 1, but we found contrasts in the way each city’s COVID and COVID-blind predictions compared to each other. In higher-demand cities like New York and Los Angeles, the newer testing data (which correlated with October 2020) mostly matched up to trends found in January 2018 - October 2020, and so the predictions for COVID and COVID-blind models yielded the same neighbors and predictions. This can be chalked up to the low variation in demand and supply of housing in both cities, due to their high prices and high inventory. However, in Chicago, which is a cheaper city and has less available real estate, the COVID pandemic correlated with rising costs and lower inventory, which meant that the predictions for COVID and COVID-blind models were different (based on different numbers of neighbors and yielding different results), with the COVID model yielding a more accurate prediction. This can be attributed to Chicago being a lower-demand city compared to LA and NY, which thus makes the city’s real estate market more subject to fluctuations based on current events and trends. 
                    <br>
                    Polynomial regression helped us find the best polynomial degree to do our regression on which was one. From there, we dove into linear regression. We found that the models that included COVID case data as a feature did not have much of a difference from those that did not include COVID case data. We think that this is because the relationship between COVID case data and median days pending to sale, if any, is not a linear one. Even though across 4 metropolitan statistical areas (New York, Los Angeles, Chicago, and Atlanta) the root mean squared error values were slightly lower when COVID case data was a feature, the differences (0.05-0.13%) were so small that they could be considered negligible.
                    <br>
                    We considered using other forms of supervised learning such as neural networks, but we decided against them because the problem we are looking into is a prediction problem and not a classification problem. The neural network we were planning to use was perceptron from scikit learn, and it is mainly used for classification.
                    <br>
                    To improve our results, we determined that we need more data during COVID. We could use datasets with daily data instead of weekly data. We could also find more relevant features to work with. Additionally, we might need to find a different housing data feature to predict instead of median days pending to sale. Our correlation matrices from the unsupervised learning portion did not show very strong correlations between median days pending to sale and COVID case data though they were slightly correlated with the value of 0.24.
                    <img src="CorrelationHousingCovid.png" width="60%" />
                </div>
            </div>
        </div>
    </div>
    <script>
        function la() {
            document.getElementById("la-res").style.display = "block";
            document.getElementById("nyc-res").style.display = "none";
            document.getElementById("chi-res").style.display = "none";
            document.getElementById("la").style.display = "none";
            document.getElementById("nyc").style.display = "block";
            document.getElementById("chi").style.display = "block";
        }

        function nyc() {
            document.getElementById("nyc-res").style.display = "block";
            document.getElementById("la-res").style.display = "none";
            document.getElementById("chi-res").style.display = "none";
            document.getElementById("nyc").style.display = "none";
            document.getElementById("la").style.display = "block";
            document.getElementById("chi").style.display = "block";
        }

        function chi() {
            document.getElementById("nyc-res").style.display = "none";
            document.getElementById("la-res").style.display = "none";
            document.getElementById("chi-res").style.display = "block";
            document.getElementById("nyc").style.display = "block";
            document.getElementById("la").style.display = "block";
            document.getElementById("chi").style.display = "none";
        }
    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
